<form name="selbox">
<select id="selectInputs" size=3 >
</select>

<select id="selectOutputs" size=3 >
</select>

</form>

<script type="text/javascript">
<!--
var midi = null;  // グローバルなMIDIAccessオブジェクト
function onMIDISuccess( midiAccess ) {

	midi = midiAccess;  // グローバルに保存します (実際の使用ではおそらくオブジェクトのインスタンスに保持します)
	var inputs = midi.inputs();
	var outputs = midi.outputs();
	var inputname =[]
	var outputname = []


	for( li in inputs ){
		inputname.push(inputs[li].name);
		console.log(inputs[li]);
		inputs[li].onmidimessage = function (midi) {
			console.log(midi);
		}

	}

	var outputs = midi.outputs();

	for (  ot in outputs ){
		outputname.push(outputs[ot].name);
	}

	for(li in outputname)
	{
	}


	var selectInputs = document.getElementById("selectInputs");
	selectInputs.onchange = change;
	for(li in inputname){
		//optionタグを作成
		var element = document.createElement("option");
		element.value = inputname[li];
		element.text = inputname[li];
		selectInputs.add(element);
	}

	var selectOutputs = document.getElementById("selectOutputs");
	selectOutputs.onchange = change;
	for(li in outputname){
		//optionタグを作成
		var element = document.createElement("option");
		var name = outputname[li];
		element.value = name;
		element.text = name;
		selectOutputs.add(element);
	}

 }

function onMIDIFailure(msg) {
  console.log( "Failed to get MIDI access - " + msg );
}

var selectedInput = null;
var selectedOutput = null;

function change(e){

	if(e.srcElement.id ==  "selectInputs")
	{
			
	}
	console.log(e.srcElement.selectedIndex);
	console.log(e.srcElement.id);
}

navigator.requestMIDIAccess().then( onMIDISuccess, onMIDIFailure );


-->
</script>

